@using DomainExpenses.Abstract
@using WebExpenses.Models
@model MGroupList
@{
    var ajaxDeleteOptions = new AjaxOptions
    {
        HttpMethod="Post",
        Url = "DeleteGroupAjax",
        UpdateTargetId = "groupsTableBody",
        
         
    };
}

@for (int i = 0; i < Model.GroupList.Count; i++)
{
    if (Model.GroupId.HasValue && Model.GroupId == Model.GroupList[i].Id)
    {
        <tr class="current">
            <th class="groupOrder">@(i + 1).</th>
            <th class="groupId">@Model.GroupList[i].Id</th>
            <th class="groupName">@Model.GroupList[i].Name</th>
            <th>
                @Html.ActionLink("Редактировать", "EditGroup")
            </th>
            <th>
                @Ajax.ActionLink("Удалить", "", ajaxDeleteOptions)
            </th>
        </tr>
    }
    else
    {
        <tr>
            <th class="groupOrder">@(i + 1).</th>
            <th class="groupId">@Model.GroupList[i].Id</th>
            <th class="groupName">@Model.GroupList[i].Name</th>
            <th class="groupEdit">
                @Html.ActionLink("Редактировать", "EditGroup")
            </th>
            <th class="groupDelete">
                @Ajax.ActionLink("Удалить", "", ajaxDeleteOptions)
            </th>
        </tr>
    }
}
<script>
    $(document).ready(function () {
        $('div#groups tbody tr th.groupOrder').click(groupTBodyTrClick);
        $('div#groups tbody tr th.groupId').click(groupTBodyTrClick);
        $('div#groups tbody tr th.groupName').click(groupTBodyTrClick);
        $('div#groups tbody tr th.groupEdit a').click(setCurrentGId);
        $('div#groups tbody tr th.groupDelete a').click(setCurrentGId);
    });
</script>
