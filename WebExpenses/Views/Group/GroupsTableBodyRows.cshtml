@using DomainExpenses.Abstract
@using WebExpenses.Models.Group
@model MGroupList
@{
    var deleteGroupAjaxOption = new AjaxOptions
    {
        UpdateTargetId = "groupsTableBody",
        HttpMethod = "POST"

    };
}

@for (int i = 0; i < Model.GroupList.Count; i++)
{
    if (Model.GroupId.HasValue && Model.GroupId == Model.GroupList[i].Id)
    {
        <tr class="current">
            <th class="groupOrder">@(i + 1).</th>
            <th class="groupId">@Model.GroupList[i].Id</th>
            <th class="groupName">@Model.GroupList[i].Name</th>
            <th class="groupEdit">
                @Html.ActionLink("Редактировать", "EditGroup", new { gId_ = @Model.GroupList[i].Id})
            </th>
            <th class="groupDelete">
                <!--Html.ActionLink("Удалить", "DeleteGroup", new { gId_ = @Model.GroupList[i].Id }, new { method = "DELETE" })-->
                <!--Ajax.ActionLink("Удалить", "DeleteGroup", new { gId_ = Model.GroupList[i].Id }, deleteGroupAjaxOption)-->
                @Ajax.ActionLink("Удалить", "DeleteGroupAjax", new { gId_ = Model.GroupList[i].Id }, deleteGroupAjaxOption)
                <!--Ajax.ActionLink("Удалить", "DeleteGroup",  deleteGroupAjaxOption)-->
            </th>
        </tr>
    }
    else
    {
        <tr>
            <th class="groupOrder">@(i + 1).</th>
            <th class="groupId">@Model.GroupList[i].Id</th>
            <th class="groupName">@Model.GroupList[i].Name</th>
            <th class="groupEdit">
                @Html.ActionLink("Редактировать", "EditGroup", new { gId_ = @Model.GroupList[i].Id })
            </th>
            <th class="groupDelete">
                <!--Ajax.ActionLink("Удалить", "DeleteGroup", new { gId_ = Model.GroupList[i].Id }, deleteGroupAjaxOption)-->
                @Ajax.ActionLink("Удалить", "DeleteGroupAjax", new { gId_ = Model.GroupList[i].Id }, deleteGroupAjaxOption)
                <!--Ajax.ActionLink("Удалить", "DeleteGroup",  deleteGroupAjaxOption)-->
            </th>
        </tr>
    }
}
<script>
    $(document).ready(function () {
        console.log('groupClick.b');
        $('div#groups tbody tr th.groupOrder').click(setCurrentGroupByClick);
        $('div#groups tbody tr th.groupId').click(setCurrentGroupByClick);
        $('div#groups tbody tr th.groupName').click(setCurrentGroupByClick);
        $('div#groups tbody tr th.groupEdit a').click(setCurrentGId);
        $('div#groups tbody tr th.groupDelete a').click(setCurrentGId);
        console.log('groupClick.e');
    });
</script>
